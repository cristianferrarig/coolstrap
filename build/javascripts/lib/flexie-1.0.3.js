/*
File: flexie.js

About: Version
  1.0.3

Project: Flexie

Description:
  Legacy support for the CSS3 Flexible Box Model

License:
  The MIT License
  
  Copyright (c) 2010 Richard Herrera

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to deal
  in the Software without restriction, including without limitation the rights
  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  THE SOFTWARE.
*/
/*
Class: Flexie
  Scoped to the Flexie Global Namespace
*/
/*jslint evil: true, regexp: false, plusplus: false */
/*global window, document */
var Flexie=function(win,doc){function trim(a){return a&&(a=a.replace(LEADINGTRIM,EMPTY_STRING).replace(TRAILINGTRIM,EMPTY_STRING)),a}function determineSelectorMethod(){var engines=ENGINES,method,engine,obj;for(engine in engines)if(engines.hasOwnProperty(engine)){obj=engines[engine];if(win[engine]&&!method){method=eval(obj.s.replace("*",engine));if(method){ENGINE=engine;break}}}return method}function addEvent(a,b){a="on"+a;var c=win[a];typeof win[a]!="function"?win[a]=b:win[a]=function(){c&&c(),b()}}function attachLoadMethod(handler){ENGINE||(LIBRARY=determineSelectorMethod());var engines=ENGINES,method,caller,args,engine,obj;for(engine in engines)if(engines.hasOwnProperty(engine)){obj=engines[engine];if(win[engine]&&!method&&obj.m){method=eval(obj.m.replace("*",engine)),caller=obj.c?eval(obj.c.replace("*",engine)):win,args=[];if(method&&caller){obj.p&&args.push(obj.p),args.push(handler),method.apply(caller,args);break}}}method||addEvent("load",handler)}function buildSelector(a){var b=a.nodeName.toLowerCase();return a.id?b+="#"+a.id:a.FLX_DOM_ID&&(b+="["+FLX_DOM_ATTR+"='"+a.FLX_DOM_ID+"']"),b}function setFlexieId(a){a.FLX_DOM_ID||(FLX_DOM_ID+=1,a.FLX_DOM_ID=FLX_DOM_ID,a.setAttribute(FLX_DOM_ATTR,a.FLX_DOM_ID))}function buildSelectorTree(a){var b=[],c,d,e,f,g,h,i,j,k,l;a=a.replace(WHITESPACE_CHARACTERS,EMPTY_STRING),a=a.replace(/\s?(\{|\:|\})\s?/g,PLACEHOLDER_STRING),c=a.split(END_MUSTACHE);for(j in c)if(c.hasOwnProperty(j)){a=c[j];if(a){d=[a,END_MUSTACHE].join(EMPTY_STRING),e=/(\@media[^\{]+\{)?(.*)\{(.*)\}/.exec(d);if(e&&e[3]){f=e[2],g=e[3].split(";"),i=[];for(k in g)g.hasOwnProperty(k)&&(l=g[k],h=l.split(":"),h.length&&h[1]&&i.push({property:h[0],value:h[1]}));f&&i.length&&b.push({selector:f,properties:i})}}}return b}function findFlexboxElements(a){var b,c,d,e,f,g=/\s?,\s?/,h,i,j,k={},l={},m,n,o,p,q,r,s,t,u;h=function(a,b,c,d){var e,f,g,h;e={selector:trim(a),properties:[]};for(f=0,g=b.properties.length;f<g;f++)h=b.properties[f],e.properties.push({property:trim(h.property),value:trim(h.value)});return c&&d&&(e[c]=d),e},i=function(a,b,c,d){var e=c&&d?k[a]:l[a],f,g,i,j,m,n,o;if(e){for(i=0,j=b.properties.length;i<j;i++){m=b.properties[i];for(n=0,o=e.properties.length;n<o;n++){g=e.properties[n];if(m.property===g.property)return f=n,!1}f?e.properties[f]=m:e.properties.push(m)}c&&d&&(e[c]=d)}else c&&d?k[a]=h(a,b,c,d):l[a]=h(a,b,NULL,NULL)};for(m=0,n=a.length;m<n;m++){o=a[m],b=trim(o.selector).replace(g,",").split(g);for(p=0,q=b.length;p<q;p++){r=trim(b[p]),c=o.properties;for(s=0,t=c.length;s<t;s++){u=c[s],d=trim(u.property),e=trim(u.value);if(d){f=d.replace("box-",EMPTY_STRING);switch(f){case"display":e==="box"&&i(r,o,NULL,NULL);break;case"orient":case"align":case"direction":case"pack":i(r,o,NULL,NULL);break;case"flex":case"flex-group":case"ordinal-group":i(r,o,f,e)}}}}}for(j in l)l.hasOwnProperty(j)&&FLEX_BOXES.push(l[j]);for(j in k)k.hasOwnProperty(j)&&POSSIBLE_FLEX_CHILDREN.push(k[j]);return{boxes:FLEX_BOXES,children:POSSIBLE_FLEX_CHILDREN}}function matchFlexChildren(a,b,c){var d,e,f=[],g,h,i,j,k,l,m;for(g=0,h=c.length;g<h;g++){i=c[g];if(i.selector){d=b(i.selector),d=d[0]?d:[d];if(d[0])for(j=0,k=d.length;j<k;j++){l=d[j];if(l.nodeName!==UNDEFINED)switch(l.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:if(l.parentNode===a){setFlexieId(l),e={};for(m in i)i.hasOwnProperty(m)&&(e[m]=i[m]);e.match=l,f.push(e)}}}}else setFlexieId(i),f.push({match:i,selector:buildSelector(i)})}return f}function getParams(a){var b;for(b in a)a.hasOwnProperty(b)&&(a[b]=a[b]||DEFAULTS[b]);return a}function buildFlexieCall(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q={},r,s,t,u="["+FLX_PARENT_ATTR+"]",v,w,x,y,z,A,B,C,D,E,F,G,H,I;if(!a)return;for(v=0,w=a.boxes.length;v<w;v++){x=a.boxes[v],x.selector=trim(x.selector),b=x.selector,c=x.properties,g=h=i=j=k=NULL;for(y=0,z=c.length;y<z;y++){A=c[y],d=trim(A.property),e=trim(A.value);if(d){f=d.replace("box-",EMPTY_STRING);switch(f){case"display":e==="box"&&(g=e);break;case"orient":h=e;break;case"align":i=e;break;case"direction":j=e;break;case"pack":k=e}}}l=LIBRARY,m=l(x.selector),m=m[0]?m:[m];for(y=0,z=m.length;y<z;y++){B=m[y];if(B.nodeType){setFlexieId(B),n=matchFlexChildren(B,l,a.children),t=b+" "+u,p={target:B,selector:b,properties:c,children:n,display:g,orient:h,align:i,direction:j,pack:k,nested:t},r=q[B.FLX_DOM_ID];if(r){for(C in p)if(p.hasOwnProperty(C)){e=p[C];switch(C){case"selector":e&&!(new RegExp(e)).test(r[C])&&(r[C]+=", "+e);break;case"children":for(D=0,E=p[C].length;D<E;D++){F=p[C][D],s=FALSE;for(G=0,H=r[C].length;G<H;G++)I=r[C][G],F.match.FLX_DOM_ID===I.match.FLX_DOM_ID&&(s=TRUE);s||r[C].push(F)}break;default:e&&(r[C]=e)}}}else q[B.FLX_DOM_ID]=getParams(p),q[B.FLX_DOM_ID].target.setAttribute(FLX_PARENT_ATTR,TRUE)}}}DOM_ORDERED=LIBRARY(u),FLEX_BOXES={};for(v=0,w=DOM_ORDERED.length;v<w;v++)B=DOM_ORDERED[v],FLEX_BOXES[B.FLX_DOM_ID]=q[B.FLX_DOM_ID];for(C in FLEX_BOXES)FLEX_BOXES.hasOwnProperty(C)&&(x=FLEX_BOXES[C],x.display==="box"&&(o=new FLX.box(x)))}function calcPx(a,b,c){var d=c.replace(c.charAt(0),c.charAt(0).toUpperCase()),e=a["offset"+d]||0,f,g,h;if(e)for(f=0,g=b.length;f<g;f++)h=parseFloat(a.currentStyle[b[f]]),isNaN(h)||(e-=h);return e}function getTrueValue(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return!PIXEL.test(e)&&NUMBER.test(e)&&(c=f.left,d=a.runtimeStyle.left,a.runtimeStyle.left=a.currentStyle.left,f.left=e||0,e=f.pixelLeft+"px",f.left=c||0,a.runtimeStyle.left=d),e}function unAuto(a,b,c){var d;switch(c){case"width":d=[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT],b=calcPx(a,d,c);break;case"height":d=[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM],b=calcPx(a,d,c);break;default:b=getTrueValue(a,c)}return b}function getPixelValue(a,b,c){return PIXEL.test(b)?b:(b==="auto"||b==="medium"?b=unAuto(a,b,c):b=getTrueValue(a,c),b)}function getComputedStyle(a,b,c){var d;if(a===UNDEFINED)return;return win.getComputedStyle?d=win.getComputedStyle(a,NULL)[b]:SIZES.test(b)?d=getPixelValue(a,a&&a.currentStyle?a.currentStyle[b]:0,b):d=a.currentStyle[b],c&&(d=parseInt(d,10),isNaN(d)&&(d=0)),d}function clientWidth(a){return a.innerWidth||a.clientWidth}function clientHeight(a){return a.innerHeight||a.clientHeight}function appendProperty(a,b,c,d){var e=[],f,g,h;for(f=0,g=PREFIXES.length;f<g;f++)h=PREFIXES[f],e.push((d?h:EMPTY_STRING)+b+":"+(d?EMPTY_STRING:h)+c);return a.style.cssText+=e.join(";"),a}function appendPixelValue(a,b,c){var d=a&&a[0]?a:[a],e,f;for(e=0,f=d.length;e<f;e++)a=d[e],a&&a.style&&(a.style[b]=c?c+"px":EMPTY_STRING)}function calculateSpecificity(a){var b,c,d,e,f,g;b=a.replace(CSS_SELECTOR,function(a,b){return"%"+b}).replace(/\s|\>|\+|\~/g,"%").split(/%/g),c={_id:100,_class:10,_tag:1},d=0;for(e=0,f=b.length;e<f;e++)g=b[e],/#/.test(g)?d+=c._id:/\.|\[|\:/.test(g)?d+=c._class:/[a-zA-Z]+/.test(g)&&(d+=c._tag);return d}function filterDuplicates(a,b,c){var d=[],e,f=(c?"ordinal":"flex")+"Specificity",g,h,i,j,k,l;for(g=0,h=a.length;g<h;g++){i=a[g];if(!c&&i.flex||c&&i["ordinal-group"]){i[f]=i[f]||calculateSpecificity(i.selector),e=FALSE;for(j=0,k=d.length;j<k;j++){l=d[j];if(l.match===i.match)return l[f]<i[f]&&(d[h]=i),e=TRUE,FALSE}e||d.push(i)}}return d}function createMatchMatrix(a,b,c){var d={},e=[],f=0,g,h="ordinal-group",i="data-"+h,j,k,l,m,n,o,p;a=filterDuplicates(a,b,c);for(j=0,k=b.length;j<k;j++){l=b[j];for(m=0,n=a.length;m<n;m++)o=a[m],c?(g=o[h]||"1",o.match===l&&(o.match.setAttribute(i,g),d[g]=d[g]||[],d[g].push(o))):(g=o.flex||"0",o.match===l&&(!o[g]||o[g]&&parseInt(o[g],10)<=1)&&(f+=parseInt(g,10),d[g]=d[g]||[],d[g].push(o)));c&&!l.getAttribute(i)&&(g="1",l.setAttribute(i,g),d[g]=d[g]||[],d[g].push({match:l}))}for(p in d)d.hasOwnProperty(p)&&e.push(p);return e.sort(function(a,b){return b-a}),{keys:e,groups:d,total:f}}function attachResizeListener(a,b){if(!RESIZE_LISTENER){var c,d,e,f,g=doc.body,h=doc.documentElement,i,j="innerWidth",k="innerHeight",l="clientWidth",m="clientHeight";addEvent("resize",function(){i&&window.clearTimeout(i),i=window.setTimeout(function(){e=win[j]||h[j]||h[l]||g[l],f=win[k]||h[k]||h[m]||g[m];if(c!==e||d!==f)FLX.updateInstance(NULL,NULL),c=e,d=f},250)}),RESIZE_LISTENER=TRUE}}function cleanPositioningProperties(a){var b,c,d,e,f;for(b=0,c=a.length;b<c;b++)d=a[b],e=d.style.width,f=d.style.height,d.style.cssText=EMPTY_STRING,d.style.width=e,d.style.height=f}function sanitizeChildren(a,b){var c=[],d,e,f;for(e=0,f=b.length;e<f;e++){d=b[e];if(d)switch(d.nodeName.toLowerCase()){case"script":case"style":case"link":break;default:d.nodeType===1?c.push(d):d.nodeType===3&&(d.isElementContentWhitespace||ONLY_WHITESPACE.test(d.data))&&(a.removeChild(d),e--)}}return c}function parentFlex(a){var b=0,c=a.parentNode,d,e,f;while(c.FLX_DOM_ID)d=FLEX_BOXES[c.FLX_DOM_ID],e=createMatchMatrix(d.children,sanitizeChildren(c,c.childNodes),NULL),b+=e.total,f=TRUE,c=c.parentNode;return{nested:f,flex:b}}function dimensionValues(a,b){var c=a.parentNode,d,e,f,g,h;if(c.FLX_DOM_ID){d=FLEX_BOXES[c.FLX_DOM_ID];for(f=0,g=d.properties.length;f<g;f++){h=d.properties[f];if((new RegExp(b)).test(h.property))return e=TRUE,FALSE}}return e}function updateChildValues(a){var b,c,d;if(a.flexMatrix)for(b=0,c=a.children.length;b<c;b++)d=a.children[b],d.flex=a.flexMatrix[b];if(a.ordinalMatrix)for(b=0,c=a.children.length;b<c;b++)d=a.children[b],d["ordinal-group"]=a.ordinalMatrix[b];return a}function ensureStructuralIntegrity(a,b){var c=a.target;return c.FLX_DOM_ID||(c.FLX_DOM_ID=c.FLX_DOM_ID||++FLX_DOM_ID),a.nodes||(a.nodes=sanitizeChildren(c,c.childNodes)),a.selector||(a.selector=buildSelector(c),c.setAttribute(FLX_PARENT_ATTR,TRUE)),a.properties||(a.properties=[]),a.children||(a.children=matchFlexChildren(c,LIBRARY,sanitizeChildren(c,c.childNodes))),a.nested||(a.nested=a.selector+" ["+FLX_PARENT_ATTR+"]"),a.target=c,a._instance=b,a}var FLX={},FLX_DOM_ID=0,FLX_DOM_ATTR="data-flexie-id",FLX_PARENT_ATTR="data-flexie-parent",SUPPORT,ENGINE,ENGINES={NW:{s:"*.Dom.select"},DOMAssistant:{s:"*.$",m:"*.DOMReady"},Prototype:{s:"$$",m:"document.observe",p:"dom:loaded",c:"document"},YAHOO:{s:"*.util.Selector.query",m:"*.util.Event.onDOMReady",c:"*.util.Event"},MooTools:{s:"$$",m:"window.addEvent",p:"domready"},Sizzle:{s:"*"},jQuery:{s:"*",m:"*(document).ready"},dojo:{s:"*.query",m:"*.addOnLoad"}},LIBRARY,PIXEL=/^-?\d+(?:px)?$/i,NUMBER=/^-?\d/,SIZES=/width|height|margin|padding|border/,MSIE=/(msie) ([\w.]+)/,WHITESPACE_CHARACTERS=/\t|\n|\r/g,RESTRICTIVE_PROPERTIES=/^max\-([a-z]+)/,PROTOCOL=/^https?:\/\//i,LEADINGTRIM=/^\s\s*/,TRAILINGTRIM=/\s\s*$/,ONLY_WHITESPACE=/^\s*$/,CSS_SELECTOR=/\s?(\#|\.|\[|\:(\:)?[^first\-(line|letter)|before|after]+)/g,EMPTY_STRING="",SPACE_STRING=" ",PLACEHOLDER_STRING="$1",PADDING_RIGHT="paddingRight",PADDING_BOTTOM="paddingBottom",PADDING_LEFT="paddingLeft",PADDING_TOP="paddingTop",BORDER_RIGHT="borderRightWidth",BORDER_BOTTOM="borderBottomWidth",BORDER_LEFT="borderLeftWidth",BORDER_TOP="borderTopWidth",HORIZONTAL="horizontal",VERTICAL="vertical",INLINE_AXIS="inline-axis",BLOCK_AXIS="block-axis",INHERIT="inherit",LEFT="left",END_MUSTACHE="}",PREFIXES=" -o- -moz- -ms- -webkit- -khtml- ".split(SPACE_STRING),DEFAULTS={orient:HORIZONTAL,align:"stretch",direction:INHERIT,pack:"start"},FLEX_BOXES=[],POSSIBLE_FLEX_CHILDREN=[],DOM_ORDERED,RESIZE_LISTENER,TRUE=!0,FALSE=!1,NULL=null,UNDEFINED,BROWSER={IE:function(){var a,b=win.navigator.userAgent,c=MSIE.exec(b.toLowerCase());return c&&(a=parseInt(c[2],10)),a}()},selectivizrEngine;return selectivizrEngine=function(){function i(a){return a.replace(h,PLACEHOLDER_STRING)}function j(a){return i(a).replace(g,SPACE_STRING)}function k(a){return j(a.replace(e,PLACEHOLDER_STRING).replace(f,PLACEHOLDER_STRING))}function l(a){return a.replace(d,function(a,b,c){var d,e,f,g,h;d=c.split(",");for(f=0,g=d.length;f<g;f++)h=d[f],e=k(h)+SPACE_STRING;return b+d.join(",")})}function m(){if(win.XMLHttpRequest)return new win.XMLHttpRequest;try{return new win.ActiveXObject("Microsoft.XMLHTTP")}catch(a){return NULL}}function n(a){var b=/<style[^<>]*>([^<>]*)<\/style[\s]?>/img,c=b.exec(a),d=[],e;while(c)e=c[1],e&&d.push(e),c=b.exec(a);return d.join("\n\n")}function o(a){var b=m(),c;return b.open("GET",a,FALSE),b.send(),c=b.status===200?b.responseText:EMPTY_STRING,a===window.location.href&&(c=n(c)),c}function p(a,b){function c(a){return a.substring(0,a.indexOf("/",8))}if(!a)return;if(PROTOCOL.test(a))return c(b)===c(a)?a:NULL;if(a.charAt(0)==="/")return c(b)+a;var d=b.split("?")[0];return a.charAt(0)!=="?"&&d.charAt(d.length-1)!=="/"&&(d=d.substring(0,d.lastIndexOf("/")+1)),d+a}function q(d){return d?o(d).replace(a,EMPTY_STRING).replace(b,function(a,b,c,e,f,g){var h=q(p(c||f,d));return g?"@media "+g+" {"+h+"}":h}).replace(c,function(a,b,c,e){return c=c||EMPTY_STRING,b?a:" url("+c+p(e,d,!0)+c+") "}):EMPTY_STRING}var a=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g,b=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))\s*([^;]*);/g,c=/(behavior\s*?:\s*)?\burl\(\s*(["']?)(?!data:)([^"')]+)\2\s*\)/g,d=/((?:^|(?:\s*\})+)(?:\s*@media[^\{]+\{)?)\s*([^\{]*?[\[:][^{]+)/g,e=/([(\[+~])\s+/g,f=/\s+([)\]+~])/g,g=/\s+/g,h=/^\s*((?:[\S\s]*\S)?)\s*$/;return function(){var a,b=[],c,d,e,f=doc.getElementsByTagName("BASE"),g=f.length>0?f[0].href:doc.location.href,h=doc.styleSheets,i,j,k;for(d=0,e=h.length;d<e;d++)c=h[d],c!=NULL&&b.push(c);b.push(window.location);for(d=0,e=b.length;d<e;d++)c=b[d],c&&(a=p(c.href,g),a&&(i=l(q(a))),i&&(j=buildSelectorTree(i),k=findFlexboxElements(j)));buildFlexieCall(k)}}(),FLX.box=function(a){return this.renderModel(a)},FLX.box.prototype={properties:{boxModel:function(a,b,c){var d,e,f,g,h,i,j;a.style.display="block",BROWSER.IE===8&&(a.style.overflow="hidden");if(!c.cleared){d=c.selector.split(/\s?,\s?/),e=doc.styleSheets,e=e[e.length-1],f="padding-top:"+(getComputedStyle(a,PADDING_TOP,NULL)||"0.1px;"),g=["content: '.'","display: block","height: 0","overflow: hidden"].join(";");for(h=0,i=d.length;h<i;h++)j=d[h],e.addRule?BROWSER.IE<8?(a.style.zoom="1",BROWSER.IE===6?e.addRule(j.replace(/\>|\+|\~/g,""),f+"zoom:1;",0):BROWSER.IE===7&&e.addRule(j,f+"display:inline-block;",0)):(e.addRule(j,f,0),e.addRule(j+":before",g,0),e.addRule(j+":after",g+";clear:both;",0)):e.insertRule&&(e.insertRule(j+"{"+f+"}",0),e.insertRule(j+":after{"+g+";clear:both;}",0));c.cleared=TRUE}},boxDirection:function(a,b,c){var d,e,f,g,h,i;if(c.direction==="reverse"&&!c.reversed||c.direction==="normal"&&c.reversed){b=b.reverse();for(f=0,g=b.length;f<g;f++)h=b[f],a.appendChild(h);d=LIBRARY(c.nested);for(f=0,g=d.length;f<g;f++)i=d[f],e=FLEX_BOXES[i.FLX_DOM_ID],e&&e.direction===INHERIT&&(e.direction=c.direction);c.reversed=!c.reversed}},boxOrient:function(a,b,c){var d=this,e,f,g,h,i;e={pos:"marginLeft",opp:"marginRight",dim:"width",out:"offsetWidth",func:clientWidth,pad:[PADDING_LEFT,PADDING_RIGHT,BORDER_LEFT,BORDER_RIGHT]},f={pos:"marginTop",opp:"marginBottom",dim:"height",out:"offsetHeight",func:clientHeight,pad:[PADDING_TOP,PADDING_BOTTOM,BORDER_TOP,BORDER_BOTTOM]};if(!SUPPORT)for(g=0,h=b.length;g<h;g++){i=b[g],i.style[BROWSER.IE>=9?"cssFloat":"styleFloat"]=LEFT;if(c.orient===VERTICAL||c.orient===BLOCK_AXIS)i.style.clear=LEFT;BROWSER.IE===6&&(i.style.display="inline")}switch(c.orient){case VERTICAL:case BLOCK_AXIS:d.props=f,d.anti=e;break;default:d.props=e,d.anti=f}},boxOrdinalGroup:function(a,b,c){var d,e;if(!b.length)return;d=function(d){var e=d.keys,f=c.reversed?e:e.reverse(),g,h,i,j,k,l;for(g=0,h=f.length;g<h;g++){i=f[g];for(j=0,k=b.length;j<k;j++)l=b[j],i===l.getAttribute("data-ordinal-group")&&a.appendChild(l)}},e=createMatchMatrix(c.children,b,TRUE),e.keys.length>1&&d(e)},boxFlex:function(a,b,c){var d=this,e,f,g,h,i,j,k;if(!b.length)return;e=function(a){var b=a.groups,c=a.keys,e,f,g,h,i,j,k,l,m,n;for(f=0,g=c.length;f<g;f++){h=c[f];for(i=0,j=b[h].length;i<j;i++){k=b[h][i],e=NULL;for(l=0,m=k.properties.length;l<m;l++)n=k.properties[l],RESTRICTIVE_PROPERTIES.test(n.property)&&(e=parseFloat(n.value));(!e||k.match[d.props.out]>e)&&appendPixelValue(k.match,d.props.pos,NULL)}}},f=function(c){var e=0,f,g,h,i,j,k,l,m;for(h=0,i=b.length;h<i;h++){j=b[h],e+=getComputedStyle(j,d.props.dim,TRUE);for(k=0,l=d.props.pad.length;k<l;k++)m=d.props.pad[k],e+=getComputedStyle(j,m,TRUE);e+=getComputedStyle(j,d.props.pos,TRUE),e+=getComputedStyle(j,d.props.opp,TRUE)}f=a[d.props.out]-e;for(h=0,i=d.props.pad.length;h<i;h++)m=d.props.pad[h],f-=getComputedStyle(a,m,TRUE);return g=f/c.total,{whitespace:f,ration:g}},g=function(a,b){var c=a.groups,e=a.keys,f,g,h=b.ration,i,j,k,l,m,n,o,p,q;for(l=0,m=e.length;l<m;l++){n=e[l],i=h*n;for(o=0,p=c[n].length;o<p;o++){q=c[n][o];if(q.match){f=q.match.getAttribute("data-flex"),g=q.match.getAttribute("data-specificity");if(!f||g<=q.flexSpecificity)q.match.setAttribute("data-flex",n),q.match.setAttribute("data-specificity",q.flexSpecificity),j=getComputedStyle(q.match,d.props.dim,TRUE),k=Math.max(0,j+i),appendPixelValue(q.match,d.props.dim,k)}}}},h=createMatchMatrix(c.children,b,NULL),h.total&&(c.hasFlex=TRUE,i=e(h),j=f(h),k=g(h,j))},boxAlign:function(a,b,c){var d=this,e,f,g=parentFlex(a),h,i,j,k,l,m;!SUPPORT&&!g.flex&&(c.orient===VERTICAL||c.orient===BLOCK_AXIS)&&(dimensionValues(a,d.anti.dim)||appendPixelValue(a,d.anti.dim,NULL),appendPixelValue(b,d.anti.dim,NULL)),e=a[d.anti.out];for(h=0,i=d.anti.pad.length;h<i;h++)j=d.anti.pad[h],e-=getComputedStyle(a,j,TRUE);switch(c.align){case"start":break;case"end":for(h=0,i=b.length;h<i;h++)m=b[h],f=e-m[d.anti.out],f-=getComputedStyle(m,d.anti.opp,TRUE),appendPixelValue(m,d.anti.pos,f);break;case"center":for(h=0,i=b.length;h<i;h++)m=b[h],f=(e-m[d.anti.out])/2,appendPixelValue(m,d.anti.pos,f);break;default:for(h=0,i=b.length;h<i;h++){m=b[h];switch(m.nodeName.toLowerCase()){case"button":case"input":case"select":break;default:var n=0;for(k=0,l=d.anti.pad.length;k<l;k++)j=d.anti.pad[k],n+=getComputedStyle(m,j,TRUE),n+=getComputedStyle(a,j,TRUE);m.style[d.anti.dim]="100%",f=m[d.anti.out]-n,appendPixelValue(m,d.anti.dim,NULL),f=e,f-=getComputedStyle(m,d.anti.pos,TRUE);for(k=0,l=d.anti.pad.length;k<l;k++)j=d.anti.pad[k],f-=getComputedStyle(m,j,TRUE);f-=getComputedStyle(m,d.anti.opp,TRUE),f=Math.max(0,f),appendPixelValue(m,d.anti.dim,f)}}}},boxPack:function(a,b,c){var d=this,e=0,f=0,g=0,h,i,j,k,l=b.length-1,m,n,o,p,q;for(n=0,o=b.length;n<o;n++)m=b[n],e+=m[d.props.out],e+=getComputedStyle(m,d.props.pos,TRUE),e+=getComputedStyle(m,d.props.opp,TRUE);f=getComputedStyle(b[0],d.props.pos,TRUE),h=a[d.props.out]-e;for(n=0,o=d.props.pad.length;n<o;n++)q=d.props.pad[n],h-=getComputedStyle(a,q,TRUE);h<0&&(h=Math.max(0,h));switch(c.pack){case"end":appendPixelValue(b[0],d.props.pos,g+f+h);break;case"center":g&&(g/=2),appendPixelValue(b[0],d.props.pos,g+f+Math.floor(h/2));break;case"justify":i=Math.floor((g+h)/l),k=i*l-h,n=b.length-1;while(n)m=b[n],j=i,k&&(j++,k++),p=getComputedStyle(m,d.props.pos,TRUE)+j,appendPixelValue(m,d.props.pos,p),n--}a.style.overflow=""}},setup:function(a,b,c){var d=this,e,f,g,h;if(!a||!b||!c)return;if(SUPPORT&&SUPPORT.partialSupport){e=createMatchMatrix(c.children,b,NULL),f=parentFlex(a),b=sanitizeChildren(a,a.childNodes),d.properties.boxOrient.call(d,a,b,c);if(!e.total||!LIBRARY(c.nested).length)c.align==="stretch"&&!SUPPORT.boxAlignStretch&&(!f.nested||!f.flex)&&d.properties.boxAlign.call(d,a,b,c),c.pack==="justify"&&!SUPPORT.boxPackJustify&&!e.total&&d.properties.boxPack.call(d,a,b,c)}else if(!SUPPORT)for(g in d.properties)d.properties.hasOwnProperty(g)&&(h=d.properties[g],h.call(d,a,sanitizeChildren(a,a.childNodes),c))},trackDOM:function(a){attachResizeListener(this,a)},updateModel:function(a){var b=this,c=a.target,d=a.nodes;cleanPositioningProperties(d);if(a.flexMatrix||a.ordinalMatrix)a=updateChildValues(a);b.setup(c,d,a),b.bubbleUp(c,a)},renderModel:function(a){var b=this,c=a.target,d=c.childNodes;return!c.length&&!d?!1:(a=ensureStructuralIntegrity(a,this),b.updateModel(a),win.setTimeout(function(){b.trackDOM(a)},0),b)},bubbleUp:function(a,b){var c=this,d,e=b.target.parentNode;while(e)d=FLEX_BOXES[e.FLX_DOM_ID],d&&(cleanPositioningProperties(d.nodes),c.setup(d.target,d.nodes,d)),e=e.parentNode}},FLX.updateInstance=function(a,b){var c,d;if(a)c=FLEX_BOXES[a.FLX_DOM_ID],c&&c._instance?c._instance.updateModel(c):c||(c=new FLX.box(b));else for(d in FLEX_BOXES)FLEX_BOXES.hasOwnProperty(d)&&(c=FLEX_BOXES[d],c&&c._instance&&c._instance.updateModel(c))},FLX.getInstance=function(a){return FLEX_BOXES[a.FLX_DOM_ID]},FLX.destroyInstance=function(a){var b,c,d,e,f,g;c=function(a){a.target.FLX_DOM_ID=NULL,a.target.style.cssText=EMPTY_STRING;for(d=0,e=a.children.length;d<e;d++)f=a.children[d],f.match.style.cssText=EMPTY_STRING};if(a)b=FLEX_BOXES[a.FLX_DOM_ID],b&&c(b);else{for(g in FLEX_BOXES)FLEX_BOXES.hasOwnProperty(g)&&c(FLEX_BOXES[g]);FLEX_BOXES=[]}},FLX.flexboxSupport=function(){var a={},b=100,c,d=doc.createElement("flxbox"),e='<b style="margin: 0; padding: 0; display:block; width: 10px; height:'+b/2+'px"></b>',f,g,h,i;d.style.width=d.style.height=b+"px",d.innerHTML=e+e+e,appendProperty(d,"display","box",NULL),appendProperty(d,"box-align","stretch",TRUE),appendProperty(d,"box-pack","justify",TRUE),doc.body.appendChild(d),c=d.firstChild.offsetHeight,f={boxAlignStretch:function(){return c===100},boxPackJustify:function(){var a=0,b,c;for(b=0,c=d.childNodes.length;b<c;b++)a+=d.childNodes[b].offsetLeft;return a===135}};for(h in f)f.hasOwnProperty(h)&&(i=f[h],g=i(),g||(a.partialSupport=TRUE),a[h]=g);return doc.body.removeChild(d),~d.style.display.indexOf("box")?a:FALSE},FLX.init=function(){FLX.flexboxSupported=SUPPORT=FLX.flexboxSupport(),(!SUPPORT||SUPPORT.partialSupport)&&LIBRARY&&selectivizrEngine()},FLX.version="1.0.3",attachLoadMethod(FLX.init),FLX}(this,document)